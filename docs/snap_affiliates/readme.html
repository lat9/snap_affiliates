<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" href="../vinos_favicon.ico" type="image/x-icon" />
<title>Snap Affiliates for Zen-Cart&reg;</title>
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
a, a:active, a:visited { color: #006666; text-decoration: none; }
a:hover { color: #00CC99; text-decoration: underline; }
BODY, P, H1, H2, H3, H4, H5, H6, LI, TD, DD, DT, table { font-family: Roboto, Verdana, AvantGarde, Tahoma, Arial, sans-serif; font-size: 12pt; color: black; padding: 0px; margin: 20px; }
H1, H2, H3, H4 { font-weight: bold; padding-top: 10px; }
h1 { font-size: 20px; }
h2 { font-size: 16px; background-color: #bcbcbc; padding: 10px; }
h3 { font-size: 14px; background-color: #dcdcdc; padding: 5px; }
h4 { font-size: 12px; border-top: 1px solid #ababab; }
dt { font-weight: bold; margin-bottom: 0; }
dd { margin-top: 0; padding-left: 40px; }
img { margin-left: 20px; width: 95%; max-width: 95%; }
ol li { margin-left: 0; }
table { border-collapse: collapse; }
.corefile { color: red; }
.template { color: green; }
.removed { text-decoration: line-through; }
.added { color: blue; }
.osh { }
.minspacing li { margin: 0; }
.smaller { font-size: smaller; }
ol li, ul li { margin-top: 5px; margin-bottom: 5px; }
ul li ul { padding-left: 0; }
.c1 { text-align: center; font-weight: bold; vertical-align: top; }
.c3 { vertical-align: top; }
.o { background-color: #ebebeb; }
.osh { color: #555577; }
-->
</style>
</head>

<body>
<a name="top" id="top"></a>
<h1>Snap Affiliates for Zen Cart 1.5.7a and later</h1>
<h3>Version 4.2.0 by lat9</h3>
<p>Copyright &copy; 2013-2021 Vinos de Frutas Tropicales</p>
<p>Current support thread at Zen Cart Forums: <a href="https://www.zen-cart.com/showthread.php?206579-Snap-Affiliates-v2-0-for-Zen-Cart-v1-5-0-and-later" target="_blank" rel="noopener">www.zen-cart.com/showthread.php?206579-Snap-Affiliates-v2-0-for-Zen-Cart-v1-5-0-and-later</a>.  This software is provided for your use under the GNU General Public License v2.0.</p>

<h3>Usage Notes</h3>
<ol>
  <li>Starting with v4.2.0, this plugin supports <b>only</b> Zen Cart versions 1.5.7a and later; if you are still using an older version of Zen Cart, please use v4.1.3 of this plugin.</li>
  <li>Starting with v4.0.0, this plugin supports <b>only</b> Zen Cart versions 1.5.5a and later; if you are still using an older version of Zen Cart, please use v3.0.4 of this plugin.</li>
  <li>In the United States (and possibly other countries), there are tax implications associated with creating an affiliate program for your website. I am neither a lawyer nor an accountant, but you should perform your own due diligence by performing a web-search for <strong>affiliate marketing 1099</strong>.</li>
</ol>

<h2>What it does</h2>
<p>This plugin enables your store to have an &quot;Affiliate Program&quot; where an authorized affiliate can receive a commission for any sales that they "drive" to your store. To become an authorized affiliate, the affiliate must create an account with your store and then submit to you (via the link to the <em>referrer_signup</em> page at either <em>My Account-&gt;Sign Me Up Today</em> or the link provided by the <a href="#sidebox">Information Sidebox</a>) the website from which they intend to promote your store. You'll receive an email informing you of the signup and you can authorize the affiliate using an admin-level <a href="#acr">tool</a>.</p>
<p>Once authorized, the affiliate can access your site's <em>referrer_tools</em> and <em>referrer_main</em> pages via links from their <em>account</em> page &mdash; <em>My Account-&gt;Affiliate Marketing Tools</em> and <em>My Account-&gt;Orders and Payments</em>, respectively &mdash; to view a snapshot of their current commission history and access the information necessary to include their <em>affiliate key</em> in links from their store to yours.  The affiliate links include a variable named <em>referrer</em> that identifies the affiliate's <em>affiliate key</em> which is created once you approve the affiliate's sign-up.</p>
<p>When one of your store's affiliates' customers clicks on an affiliate link, your store's customization detects the <em>referrer</em> variable and creates a cookie named <em>referrer_key</em> that contains the affiliate's key value.  The cookie's lifetime is 1 year (31536000 seconds); you can change this value via an admin <a href="#lifetime">configuration</a>.  Each time a customer comes to your store with the <em>referrer</em> variable in the link, the <em>referrer_key</em> cookie is overwritten.  So long as the cookie's lifetime has not expired, the customer has not cleared their browser cache and/or cookies and the affiliate is still in "good standing" (i.e. has not been banned), any purchase that the customer makes on your website results in an earned commission for that affiliate. Starting with v2.3.0, you can limit the number of customer purchases for which an affiliate receives a commission; see <a href="#purchases">Purchases Per Cookie</a> for more information.</p>
<p>Starting with v3.0.0, your affiliates can choose their method of commission-payment, either <em>Check/Money Order</em> or (optionally) via PayPal&reg; to their PayPal account email address.  Refer to <a href="#payment">Commission Payment Types</a> for more information.</p>

<h2>Customer Interfaces</h2>
<h3 id="sidebox">Information Sidebox</h3>
<p>An <em>Affiliate Program</em> link is added to the <em>Information</em> sidebox to point people to the <a href="#p_signup">referrer_signup</a> page, if <a href="#info_box">enabled</a> by the plugin's configuration settings.</p>
<p><strong>Note:</strong> If your store doesn't use the information sidebox, you can add PHP code to your alternate menu structure to create the "Referrer Signup" link.  Here's the code used in the sidebox to add the link; you'll need to change the <em>$information[]</em> variable to match your menu's structure:</p>
<pre>
  if (defined('SNAP_INFORMATION_SIDEBOX') && SNAP_INFORMATION_SIDEBOX === 'true') {
    $information[] = '&lt;a href="' . zen_href_link(FILENAME_REFERRER_SIGNUP, '', 'SSL'). '"&gt;' . BOX_INFORMATION_REFERRER_TERMS . '&lt;/a&gt;';
  }
</pre>

<h3>My Account Information Page: <em>account</em></h3>
<p>A new group (Referral Program) is added with the following links:</p>
<ol>
  <li><strong>Sign Me Up Today</strong>. This link is displayed <em>only</em> if the customer has not yet enrolled in your affiliate program and provides a link to the <a href="#p_signup">referrer_signup</a> page.</li>
  <li><strong>Orders and Payments</strong>. This link is displayed <em>only</em> if the customer has enrolled in, been approved for and is not currently banned from your affiliate program, providing a link to the <a href="#p_main">referrer_main</a> page.</li>
  <li><strong>Affiliate Marketing Tools</strong>. This link is displayed <em>only</em> if the customer has enrolled in, been approved for and is not currently banned from your affiliate program, providing a link to the <a href="#p_tools">referrer_tools</a> page.</li>
</ol>

<h3 id="p_signup">Affiliate Signup Page: <em>referrer_signup</em></h3>
<p>This page operates differently based on whether or not the customer has previously signed up for your program.  If the customer has not signed up, a form is presented allowing the customer to enter the website address from which they intend to link to your site with their affiliate key followed by your affiliate program's terms and conditions. Otherwise, if the page is invoked with the <strong>terms</strong> variable (e.g. www.mysite.com/index.php?main_page=referrer_signup&amp;terms) your affiliate program's terms and conditions will be displayed; otherwise, the page redirects to <a href="#p_main">referrer_main</a> page.</p>

<h3 id="p_main">Affiliate Main Page: <em>referrer_main</em></h3>
<p>This page operates differently based on whether the customer has previously signed up for your program and, if so, their current approval/banned status. If the customer has not signed up, this page redirects to the <a href="#p_signup">referrer_signup</a> page. Otherwise, if either the customer is not yet approved or has been banned from the program, this page displays a message indicating that their submission is in the approval process.  Finally, if the customer has signed up, is approved and is not banned, this page displays three sections:</p>
<ol>
  <li><strong>My Referrer Information</strong>.  Displays the customer's affiliate key, last payment date and current commission rate.</li>
  <li><strong>Sales Summary</strong>. Displays the current sales and unpaid commission and their year-to-date sales and commission.</li>
  <li><strong>Commission-Payment Activity</strong>. Displays a form that the customer can use to search a specific time period for commission payments; details are displayed for commission payments that occurred within the selected timeframe.</li>
</ol>
<p><strong>Note:</strong> Affiliate sales and associated commissions are not shown for orders with an "Orders Status" value that falls in the list of <a href="#exclusions"><em>Orders Status Exclusions</em></a> specified by your admin.</p>

<h3 id="p_tools">Affiliate Marketing Tools: <em>referrer_tools</em></h3>
<p>This page only displays if a customer is signed in (redirecting to the <em>login</em> page otherwise), has applied (redirects to <a href="#p_signup">referrer_signup</a> if not) and been approved for an affiliate account and is not currently banned, redirecting to <a href="#p_main">referrer_main</a> for either of these conditions. If the page displays, it shows either two or three sections:</p>
<ol>
  <li><strong>Site Link</strong>. Displays a text-area box that includes an HTML anchor link to your home page that includes the affiliate's key value. The affiliate can copy this HTML to include on their page that links back to you.</li>
  <li><strong>Deep Link Generator</strong>. Displays an input field where the affiliate can enter (or paste) a link to a specific page on your site (e.g. a specific product) and then click the <em>Transform</em> button to add their <em>affiliate key</em> value to the link.</li>
  <li><strong>Banners</strong>. If you have created and configured some <a href="#config_api">Affiliate Program Images</a>, this section displays each of those images along with a textarea box that includes a home-page link to your store using that image and the affiliate's key.</li>
</ol>

<h2>Zen Cart Admin Interfaces</h2>
<p>The first time you start your Zen Cart admin after copying this plugins files to your installation, the plugin's initialization file runs.  That file creates the database tables named <em>commission</em> and <em>referrers</em>, including your DB_PREFIX value, creates the settings for the plugin's <a href="#acs">configuration</a> and creates the database settings to allow the display of <em>Configuration-&gt;Affiliate Program</em> and <a href="#acr"><em>Customers-&gt;Referrers</em></a>.</p>

<h3 id="acs">Configuration-&gt;Affiliate Program</h3>
<p>As installed, the configuration screen for your affiliate program looks like the following.</p>
<img src="referrers_configuration.jpg" title="Configuration screenshot" alt="Configuration screenshot" />
<p>The following configuration values allow you to customize your affiliate program:</p>
<dl>
  <dt>Module Version</dt>
  <dd>Displays the currently-installed version of the plugin</dd>
  
  <dt>Enable Storefront Processing?</dt>
  <dd>Identifies whether (true) or not the plugin's storefront processing should be enabled.  The value defaults to <b>false</b> on initial installations; to <b>true</b> on upgrades from a <em>SNAP Affiliates</em> version prior to v4.1.0.</dd>
  
  <dt>Default Commission</dt>
  <dd>Contains the default commission rate for your affiliates.  The value is specified as a floating-point value in the range 0.0 to 1.0 and represents the percentage that an affiliate will receive if a customer makes a purchase from your store using their referral code. (Default: 0.1 &mdash; 10%)</dd>
  
  <dt>Order Total Exclusions</dt>
  <dd>Contains a comma-separated, packed list (i.e. no intervening blanks) of "Order Total" classes to which the default commission does not apply.  The default value <strong>ot_shipping,ot_tax</strong> results in no commission being given for shipping- and tax-related items.</dd>
  
  <dt>Affiliate Key Prefix</dt>
  <dd>Identifies the character prefix used to create <em>affiliate key</em> values, identifying a specific affiliate.  Once you've started your affiliate program, don't change this value or existing affiliates will no longer be recognized! (Default: CNWR_).</dd>
  
  <dt>Send Affiliate Emails To</dt>
  <dd>Identify the admin-level email address to which all affiliate-related emails are sent.  Emails are generated during affiliate signup (the <em>referrer_signup</em> page) and within your admin when an affiliate is either authorized, banned or paid.</dd>
  
  <dt id="config_api">Affiliate Program Images</dt>
  <dd>Images that you use for your affiliate program reside in your store's /images/referrers directory (created as part of the install).  Each file's name matches the template <strong>ref*.<em>ww</em>.<em>hh</em>.<em>ext</em></strong> where <em>ww</em> is the pixel-width, <em>hh</em> is the pixel-height and <em>ext</em> is the file extension (usually gif or jpg) of the image.<br /><br />You identify your images to the plugin by entering this information into a fixed template: /<em>ww</em>,<em>hh</em>,<em>ext</em>/[<em>ww</em>,<em>hh</em>,<em>ext</em>/&hellip;].  If, for example, you have two banner image files (ref.60.80.gif and ref.120.60.jpg), you will enter <strong>/60,80,gif/120,60,jpg/</strong> into this field. If you have multiple images of the same size and filetype, their filenames must start with <b>ref</b>, with any suffix you like appended &mdash; e.g. ref_1.60.80.gif and ref_2.60.80.gif.</dd>
  
  <dt id="info_box">Include in Information Sidebox?</dt>
  <dd>This true/false switch identifies whether or not an <em>Our Affiliate Program</em> link appears in your store's "Information" sidebox. (Default: false)</dd>

  <dt id="config_adc">Affiliate Display Count</dt>
  <dd>Specifies the maximum number of affiliates to display on each page of your admin's <em>Customers-&gt;Referrers</em>. (Default: 50)</dd>
  
  <dt>Allow Self-Commissions</dt>
  <dd>Identifies whether ('true') or not ('false') an affiliate receives a commission on purchases made from their store account using their <em>affiliate key</em>. (Default: 'false')</dd>
  
  <dt id="exclusions">Orders Status Exclusions</dt>
  <dd>Contains a comma-separated, packed list (i.e. no intervening blanks) of "Orders Status" ID values that should not receive a commission.  For example, the order status value of "Pending" is associated with an Orders Status ID of 1; if you want to exclude Pending orders from receiving a commission, you would enter <strong>1</strong> in this field. (Default: blank)</dd>
  
  <dt id="lifetime">Cookie Lifetime</dt>
  <dd>Specifies the lifetime, in seconds, of the cookie that is set when a customer enters your store via an affiliate's link.  As long as this cookie is set in the customer's browser cache, the affiliate (if approved and not banned) will receive a commission for all purchases made by the customer. (Default: 31536000 &mdash; 60*60*24*365 seconds)</dd>
  
  <dt id="purchases">Purchases Per Cookie</dt>
  <dd>Allows you to choose the number of purchases that a customer can make on a single affiliate cookie, either <em>All</em> or <em>One</em>. If you choose <em>All</em>, then all purchases by the customer within the &quot;Cookie Lifetime&quot; will result in a commission to the associated affiliate. If you choose <em>One</em>, the customer's affiliate cookie is deleted upon completion of their first purchase within the affiliate cookie's lifetime. (Default: All)</dd>
   
  <dt id="combine">Combine Exclusions on Referrers Page?</dt>
  <dd>If your store has a number of <em>Order Status Exclusions</em>, the display on a <em>Customers-&gt;Referrers</em> details page can get overwhelming. To combine the "Order Total" and "Commission Total" values associated with <strong>all</strong> the <em>Order Status Exclusions</em> into a single column, choose <b>Yes</b>.  Choose <b>No</b> to display every "Order Status" value in a separate column. (Default: No)</dd>
 
  <dt id="enable_pp">Enable PayPal&reg; Commission Payment Method?</dt>
  <dd>Starting with v3.0.0, you can allow your affiliate customers to choose their method of payment.  Since not all Zen Cart shops use PayPal (and might not have a PayPal account), this commission payment-method must be enabled to show to your customers.  Refer to <a href="#payment">Commission Payment Methods</a> for more details.  (Default: No)</dd>
  
</dl>

<h3 id="acr">Customers-&gt;Referrers</h3>
<p>This tool allows you to administer your affiliate program participants.</p>
<img src="referrers_admin_main.jpg" title="Customers / Referrers Main Screen" alt="Customers / Referrers Main Screen" />
<p>The first screen (see above) shows a summary of participants (the number per page is controlled by a configuration <a href="#config_adc">switch</a>) and, clicking on the "Details" button, will show (within the "Order History" group) a list of orders in your store that are associated with the selected affiliate.</p>
<img src="referrers_details.jpg" title="Customers / Referrers Details Screen" alt="Customers / Referrers Details Screen" />
<p>Within the "Status" group, you can:</p>
<ul>
  <li><em>Approve</em> the participant's entry into your affiliate program. Once you have approved an affiliate, this button be disabled. Until you approve an affiliate, they will not have access to their <em>referrer_main</em> and <em>referrer_tools</em> pages. When you click the "Approve" button, an email is sent to the affiliate to let them know of the approval.</li>
  <li><em>Ban</em> or <em>Unban</em> the affiliate. When an affiliate is banned, they neither have access to their affiliate-account pages nor do they collect commissions during the 'banned' period. When you click the "Ban" button, an email is sent to the affiliate to let them know the status change.</li>
  <li><em>Pay</em> the affiliate any accrued commission.  This button is active only if there is a non-0 commission to be paid. Note that clicking this button doesn't actually result in the affiliate being paid, only that the commissionable orders that have not yet been paid are marked as paid. An email is sent to the affiliate to let them know of the payment and an <em>orders_status_history</em> record is generated for each payment.</li>
  <li><em>Update</em> the commission percentage for the affiliate.  The commission value is entered as a whole number between 0 and 100 and the new commission value applies to any commissionable orders placed after the update.</li>
  <li><em>Update Payment Type</em>.  Use this button to update the commission payment-type for the referrer.  This value defaults to &quot;Check/Money-order&quot; and can be changed if you've set <a href="#enable_pp">Enable PayPal&reg; Commission Payment Method?</a> to <b>Yes</b>.</li>
</ul>
<p>Starting with v2.3.0, each item in the "Order History" group includes the ID value associated with a commissioned order, with a link to the associated order's details.  Similarly, each commissioned order within the admin's <em>Customers-&gt;Orders</em> is identified by an icon with a link-back to the referrer's details page.</p>
<p>Beginning with v2.7.0, the following screen is shown when you click the <em>Pay</em> button from the affiliate's details screen.  You can select, from the currently unpaid but commissionable orders, which commissions to pay and, if needed by your business practices, modify the commission amount paid from the calculated default.</p>
<img src="referrers_pay.jpg" title="Customers / Referrers Pay" alt="Customers / Referrers Pay" />

<h3>Tools-&gt;Newsletter and Product Notifications Manager</h3>
<p>Starting with v4.1.0 of the plugin, you can send your approved and unbanned referrers targeted emails and/or newsletters by selecting the <b>All Affiliates</b> audience:</p>
<img src="newsletter.jpg" alt="Select Affiliates for Emails" title="Select Affiliates for Emails" />

<h3 id="payment">Commission Payment Types</h3>
<p>Starting with v3.0.0 of the plugin, your referrers can choose their method of payment type.  The <em>Check/Money-order</em> type is enabled automatically and, if your store has a PayPal&reg; account, you can <a href="#enable_pp">enable</a> your customers to choose to be paid via PayPal, too!</p>
<p>You can change a customer's commission payment-type within their &quot;details&quot; page from the <em>Customers-&gt;Referrers</em> tool and the customer can also change their payment-type via link from their <code>referrer_main</code> page.  Each commission payment made now includes an indication of the commission payment-type.</p>
<p><strong>Note:</strong> The PayPal payment type is <strong>not</strong> an automatic method of payment!  You'll need to sign into your PayPal account and &quot;Send Money&quot; to each of your referrers who have chosen to be paid via PayPal.</p> 

<h2 id="install">Installation</h2>
<p>There are <span class="template">template-overrides</span> required by this plugin; you should <strong>always</strong> backup your cart&rsquo;s database and files prior to making any changes.  Unless otherwise noted, Zen Cart 1.5.7c is used as the change-basis for the <span class="template">template-override</span> changes.</p>
<ol type="A">
  <li>Backup both your Zen Cart installation and database &mdash; this plugin will will modify both.</li>
  <li><strong>Double-check the backup you just created</strong>.  Better safe than sorry!</li>
  <li>Unzip the plugin's distribution zip-file into a temporary directory.  Rename the &quot;YOUR_TEMPLATE&quot; directories (<b>2 of them</b>) to match your custom template&rsquo;s name:<ol>
    <li>/includes/modules/sideboxes/YOUR_TEMPLATE</li>
    <li>/includes/templates/YOUR_TEMPLATE</li>
  </ol> and the &quot;YOUR_ADMIN&quot; directory to match your renamed admin folder.</li>
  <li>Your best approach for installing <strong>any</strong> new software is to use a local copy for your testing before deploying the changes to your live store. If you must install this directly on your live store, put your store into Maintenance Mode using your admin's Configuration-&gt;Maintenance Mode-&gt;Down for Maintenance setting, first.  You'll then either copy the files to your local installation or use your FTP/SFTP program to copy the files to your hosted store.</li>
  <li>Check to see if your installation already has the following <span class="template">template-override</span> files.  If a file is not present, copy the file; otherwise, use file-merging software to merge this plugin's changes into your customized file prior to copying:<ol>
    <li><span class="template">/includes/modules/sideboxes/YOUR_TEMPLATE/information.php</span> <span class="smaller">(This is the zc157c <code>template_default</code> version of the file, with one marked change-section)</span></li>
    <li><span class="template">/includes/templates/YOUR_TEMPLATE/templates/tpl_account_default.php</span> <span class="smaller">(This is the zc157c <code>template_default</code> version of the file, with one marked change-section)</span></li>
  </ol></li>
  <li>All the remaining files are specific to this plugin and can simply be copied:<ol>
    <li>/images/referrers/index.html</li>
    <li>/includes/auto_loaders/config.snap.php</li>
    <li>/includes/classes/observers/class.snap_order_observer.php</li>
    <li>/includes/extra_datafiles/snap_file_database_names.php</li>
    <li>/includes/functions/snap_functions.php <span class="smaller">(Added in v4.1.0)</span></li>
    <li><span class="removed">/includes/functions/extra_functions/osh_updated_by_functions.php</span> <span class="smaller">(v4.1.0 and later, included in the Zen Cart base)</span></li>
    <li>/includes/init_includes/init_snap.php</li>
    <li>/includes/languages/english/extra_definitions/snap_affiliates.php</li>
    <li>/includes/languages/english/html_includes/define_referral_terms.php</li>
    <li>/includes/languages/english/html_includes/define_referral_tools.php</li>
    <li>/includes/languages/english/referral_edit.php</li>
    <li>/includes/languages/english/referral_main.php</li>
    <li>/includes/languages/english/referral_signup.php</li>
    <li>/includes/languages/english/referral_tools.php</li>
    <li>/includes/modules/pages/account/header_php_referrals.php</li>
    <li>/includes/modules/pages/referrer_edit/header_php.php</li>
    <li>/includes/modules/pages/referrer_edit/jscript_show_hide.php</li>
    <li>/includes/modules/pages/referrer_edit/on_load_main.js</li>
    <li>/includes/modules/pages/referral_main/header_php.php</li>
    <li>/includes/modules/pages/referral_signup/header_php.php</li>
    <li>/includes/modules/pages/referral_tools/header_php.php</li>
    <li>/includes/modules/pages/referral_tools/jscript_tools.php</li>
    <li>/includes/templates/template_default/css/referral_main.css</li>
    <li>/includes/templates/template_default/css/referral_tools.css</li>
    <li>/includes/templates/template_default/css/stylesheet_referrers.css</li>
    <li>/includes/templates/template_default/templates/tpl_modules_account_referrers.php <span class="smaller">(Added in v4.1.0)</span></li>
    <li>/includes/templates/template_default/templates/tpl_referrer_edit_default.php</li>
    <li>/includes/templates/template_default/templates/tpl_referrer_main_default.php</li>
    <li>/includes/templates/template_default/templates/tpl_referrer_signup_default.php</li>
    <li>/includes/templates/template_default/templates/tpl_referrer_tools_default.php</li>
    <li>/includes/templates/YOUR_TEMPLATE/css/referral_main.css</li>
    <li>/includes/templates/YOUR_TEMPLATE/css/referral_tools.css</li>
    <li>/includes/templates/YOUR_TEMPLATE/css/stylesheet_referrers.css</li>
    <li><span class="corefile removed">/YOUR_ADMIN/orders.php</span> <span class="smaller">((v4.1.0 and later, included in the Zen Cart base)</span></li>
    <li>/YOUR_ADMIN/referrers.php</li>
    <li>/YOUR_ADMIN/images/icons/cash.jpg <span class="smaller">(No longer used; a font-awesome glyph is used instead)</span></li>
    <li>/YOUR_ADMIN/includes/auto_loaders/config.snap_admin.php <span class="smaller">(Added in v4.0.1)</span></li>
    <li>/YOUR_ADMIN/includes/classes/observers/SnapAdminObserver.php <span class="smaller">(Added in v4.1.0)</span></li>
    <li>/YOUR_ADMIN/includes/extra_datafiles/referrers_filenames.php</li>
    <li><span class="removed">/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</span> <span class="smaller">(No longer used, stubbed-out as of v4.0.1)</span></li>
    <li><span class="removed">/YOUR_ADMIN/includes/functions/extra_functions/osh_updated_by_admin_functions.php</span> <span class="smaller">(v4.1.0 and later, included in the Zen Cart base)</span></li>
    <li>/YOUR_ADMIN/includes/functions/extra_functions/referrers_functions.php</li>
    <li>/YOUR_ADMIN/includes/init_includes/init_snap_admin.php <span class="smaller">(Added in v4.0.1)</span></li>
    <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
    <li><span class="removed">/YOUR_ADMIN/includes/languages/english/osh_updated_by.php</span> <span class="smaller">(v4.1.0 and later, included in the Zen Cart base)</span></li>
    <li>/YOUR_ADMIN/includes/languages/english/extra_definitions/referrers_info.php</li>
    <li>/YOUR_ADMIN/includes/languages/english/extra_definitions/referrers_name.php</li>
  </ol></li>
  <li>Sign onto your Zen Cart admin to cause the automatic database updates to be performed for the plugin. Use your admin's <a href="#acs">Configuration-&gt;Affiliate Program</a> to set the values for your store.</li>
  <li>Take your store out of "Maintenance Mode".</li>
</ol>

<h2>Version History:</h2>
<p>This plugin is based on v1.0.2.1 of the <a href="https://www.zen-cart.com/downloads.php?do=file&amp;id=898"><em>Snap Affiliates</em></a> add-on developed for the 1.3.x versions of Zen Cart&reg;, but this version (v4.2.0 and later) has been modified for zc157a and later <em>only</em>.</p>
<ul>
  <li>v4.2.0-beta1, 2021-08-14:<ul>
    <li>CHANGE: Dropping support for Zen Cart versions prior to zc157a; template-overrides now use zc157c as the change-basis.</li>
    <li>BUGFIX: Can't pay affiliates via admin-tool if one or more orders' <code>date_purchased</code> is <code>NULL</code>.</li>
    <li>BUGFIX: Create the affiliate-cookie using &quot;samesite=lax&quot;.</li>
    <li>BUGFIX: Don't offer to pay commissions on orders with excluded statuses.</li>
    <li>CHANGE: Add 'standard' Zen Cart <b>Action</b> column to referrers' listing.</li>
    <li>The following files were changed or <span class="removed">removed</span>:<ol>
        <li>/includes/functions/snap_functions.php</li>
        <li>/includes/init_includes/init_snap.php</li>
        <li>/YOUR_ADMIN/referrers.php</li>
        <li>/YOUR_ADMIN/includes/init_includes/init_snap_admin.php</li>
        <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
        <li><span class="removed">/zc155/*.**</span></li>
    </ol></li>
  </ul></li>
  <li>v4.1.3, 2020-07-11:<ul>
    <li>BUGFIX: Correct admin listing 'missing' older, unpaid commissions.</li>
    <li>The following files were changed:<ol>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/init_includes/init_snap_admin.php</li>
    </ol></li>
  </ul></li>
  <li>v4.1.2, 2020-03-31:<ul>
    <li>BUGFIX: Correct '0000-00-00 00:00:00' datetime database elements' update for MySQL 5.7.</li>
    <li>CHANGE: Now using the <code>template_default</code> version as the change-basis for the <code>account</code> page's template modification.</li>
    <li>The following files were changed:<ol>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_account_default.php</li>
      <li>/YOUR_ADMIN/includes/init_includes/init_snap_admin.php</li>
    </ol></li>
  </ul></li>
  <li>v4.1.1, 2019-11-02:<ul>
    <li>BUGFIX: Admin tool's date dropdown limited to current year.</li>
    <li>The following files were changed:<ol>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/referrers_functions.php</li>
    </ol></li>
  </ul></li>
  <li>v4.1.0, 2019-04-25:<ul>
    <li>CHANGE: <b>Major</b> restructuring to support Zen Cart 1.5.6 and future PHP/MySQL versions.  If you are upgrading <em>SNAP Affiliates</em> and have made changes to its template files, be sure to merge your changes with those provided in the plugin's <code>/includes/templates/template_default</code> sub-directory for continued operation!</li>
    <li>CHANGE: Clarify the description of the <em>Order Status Exclusions</em> configuration setting.</li>
    <li>CHANGE: Update the store's database to enable emails and/or newsletters to be sent to all approved (and not banned) affiliates.</li>
    <li>BUGFIX: When a customer record is deleted, make sure that the associated <code>referrers</code> record is removed, too.  Note that this processing is zc156-specific, as there's a notification now issued for this condition.  For previous versions of Zen Cart, the &quot;orphaned&quot; <code>referrers</code> records are removed when the plugin is updated.</li>
    <li>The <em>majority</em> of the plugin's files were changed for this release, so consider that <b>all</b> files have been changed!  Notably, the following files were added or removed from the plugin's distribution:<ol>
      <li><span class="added">/includes/functions/snap_functions.php</span></li>
      <li><span class="added">/includes/templates/template_default/templates/tpl_modules_account_referrers.php</span></li>
      <li><span class="corefile removed">/YOUR_ADMIN/orders.php</span> <span class="smaller">(No longer distributed; using zc156-supplied notifications)</span></li>
      <li><span class="added">/YOUR_ADMIN/includes/classes/observers/SnapAdminObserver.php</span></li>
      <li>/YOUR_ADMIN/includes/init_includes/init_snap_admin.php</li>
      <li><span class="corefile">/zc155/YOUR_ADMIN/orders.php</span> <span class="smaller">(This is the zc155f version of the file, updated with zc156 notifications)</span></li>
    </ol></li>
    <li>Database changes:<ol>
      <li>Added configuration setting <em>Enable Storefront Processing?</em>, defaulting to <b>false</b> for initial installs and <b>true</b> for upgrades.</li>
    </ol></li>
  </ul></li>
  <li>v4.0.1, 2019-04-22:<ul>
    <li>BUGFIX: Correct unpaid commission dates throw errors on more recent/strict versions of MySql.</li>
    <li>The following files were changed:<ol>
      <li>/includes/classes/observers/class.snap_order_observer.php</li>
      <li>/includes/modules/pages/referrer_main/header_php.php</li>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li><span class="added">/YOUR_ADMIN/includes/auto_loaders/config.snap_admin.php</span></li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php <span class="smaller">(No longer used, stubbed out)</span></li>
      <li><span class="added">/YOUR_ADMIN/includes/init_includes/init_snap_admin.php</span></li>
      <li>/YOUR_ADMIN/includes/languages/english/extra_definitions/referrers_info.php</li>
    </ol></td>
    </ol></li>
  </ul></li>
  <li>v4.0.0, 2017-07-30:<ul>
    <li>BUGFIX: Commission payments in fractional currency-units were erroneously being disallowed.</li>
    <li>CHANGE: Update all core-/template-file changes to use Zen Cart 1.5.5b as the change-basis; support is dropped for Zen Cart versions <em>prior to</em> Zen Cart 1.5.5a.</li>
    <li>The following files were changed:<ol>
      <li><span class="template">/includes/modules/sideboxes/YOUR_TEMPLATE/information.php</span></li>
      <li><span class="template">/includes/templates/YOUR_TEMPLATE/tpl_account_default.php</span></li>
      <li><span class="corefile">/YOUR_ADMIN/orders.php</span></li>
      <li><span class="removed">/YOUR_ADMIN/includes/auto_loaders/config.zc154_compatibility.php</span></li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li><span class="removed">/YOUR_ADMIN/includes/init_includes/init_zc154_compatibility.php</span></li>
    </ol></li>
  </ul></li>
  <li>v3.0.4, 2016-04-16:<ul>
    <li>CHANGE: Documentation/uninstall restructuring; check the /docs/snap_affiliates folder for these files.</li>
    <li>CHANGE: Remove full incorporation of the &quot;OSH - Updated By&quot; plugin from the admin's <em>Customers-&gt;Orders</em> handling, in preparation for a Zen Cart 1.5.5 plugin update.</li>
    <li>CHANGE: Properly mark all <span class="template">template-override</span> file changes to identify the <em>SNAP</em> updates.</li>
    <li>CHANGE: Move all SNAP-specific template files into the <code>template_default</code> folder; allows easier reuse on multiple templates.</li>
    <li>BUGFIX: Correct misspelling on <code>referrer_main</code> page.</li>
    <li>This version moves all the template-related files introduced by <em>SNAP</em> into the <code>template_default</code> folder from the <code>YOUR_TEMPLATE</code> folder.  This enables the base <em>SNAP</em> formatting to be more easily reused by multiple templates.  Those movements are <em>not</em> accounted for in the following list:<ol>
      <li>/includes/functions/extra_functions/osh_updated_by_functions.php</li>
      <li>/includes/languages/english/referrer_main.php</li>
      <li><span class="template">/includes/languages/english/YOUR_TEMPLATE/account.php</span></li>
      <li><span class="template">/includes/modules/sideboxes/YOUR_TEMPLATE/information.php</span></li>
      <li><span class="template">/includes/templates/YOUR_TEMPLATE/tpl_account_default.php</span></li>
      <li><span class="corefile">/YOUR_ADMIN/orders.php</span></li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
    </ol></li>
  </ul></li>
  <li>v3.0.3, 2015-12-06:<ul>
    <li>CHANGE: Update class-constructor function names for PHP 7 compliance.</li>
    <li>The following files were changed:<ol>
      <li>/includes/classes/observers/class.snap_order_observer.php</li>
    </ol></li>
  </ul></li>
  <li>v3.0.2, 2015-05-28:<ul>
    <li>BUGFIX: Update orders-status-history processing to properly convert CRLF characters in the status-update message.</li>
    <li>The following files were changed:<ol>
      <li>/includes/functions/extra_functions/osh_updated_by_functions.php</li>
    </ol></li>
  </ul></li>
  <li>v3.0.1, 2015-03-22:<ul>
    <li>BUGFIX: Security update, refer to the following section for affected modules.  Lines changed in the <em>Snap Affilates</em> modules include a comment <code>//-v3.0.1</code> for the affected lines, making it easier for you to apply the fix to pre-v3.0.0 installations. Thanks to <b>bumba000</b> for the report!</li>
    <li>The following files were changed:<ol>
      <li>/includes/modules/pages/referrer_edit/header_php.php</li>
      <li>/includes/modules/pages/referrer_signup/header_php.php</li>
      <li>/YOUR_ADMIN/referrers.php</li>
    </ol></li>
  </ul></li>
  <li>v3.0.0, 2015-03-14:<ul>
    <li>CHANGE: Add the capability for a referrer to choose their payment method, either <em>Check/Money-order</em> or (optionally) <em>PayPal&reg;</em>.</li>
    <li>The following files were changed:<ol>
      <li>/includes/classes/observers/class.snap_order_observer.php</li>
      <li>/includes/languages/english/extra_definitions/YOUR_TEMPLATE/snap_affiliates.php</li>
      <li>/includes/languages/english/YOUR_TEMPLATE/referrer_edit.php</li>
      <li>/includes/languages/english/YOUR_TEMPLATE/referrer_main.php</li>
      <li>/includes/modules/pages/referrer_edit/header_php.php</li>
      <li><span class="added">/includes/modules/pages/referrer_edit/jscript_show_hide.php</span></li>
      <li><span class="added">/includes/modules/pages/referrer_edit/on_load_main.js</span></li>
      <li>/includes/modules/pages/referrer_main/header_php.php</li>
      <li>/includes/modules/pages/referrer_tools/header_php.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_referrer_edit_default.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_referrer_main_default.php</li>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
    </ol></li>
    <li>Database changes:<ol>
      <li>Added configuration setting <em>Enable PayPal&reg; Commission Payment Method?</em>.</li>
      <li>Columns <em>commission_payment_type</em> and <em>commission_payment_type_detail</em> added to the <b>commissions</b> table.</li>
      <li>Columns <em>referrer_payment_type</em> and <em>referrer_payment_type_detail</em> added to the <b>referrers</b> table.</li>
    </ol></li>
  </ul></li>
  <li>v2.8.2, 2015-02-26:<ul>
    <li>BUGFIX: Navigation &quot;issues&quot; occurred when split-page is active.</li>
    <li>The following files were changed:<ol>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
    </ol></li>
  </ul></li>
  <li>v2.8.1, 2015-02-04:<ul>
    <li>CHANGE: Support multiple affiliate banner images of the same file type and dimensions.</li>
    <li>The following files were changed:<ol>
      <li>/includes/pages/referrer_tools/header_php.php</li>
    </ol></li>
  </ul></li>
  <li>v2.8.0, 2014-12-21:<ul>
    <li>CHANGE: Use Zen Cart v1.5.4 as the base for any core-file modifications.</li>
    <li>The following files were changed:<ol>
      <li><span class="corefile">/YOUR_ADMIN/orders.php</span></li>
      <li><span class="added">/YOUR_ADMIN/includes/auto_loaders/config.zc154_compatibility.php</span></li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li><span class="added">/YOUR_ADMIN/includes/init_includes/init_zc154_compatibility.php</span></li>
    </ol></li>
  </ul></li>
  <li>v2.7.3, 2014-12-07:<ul>
    <li>Add the <em>Home-page link</em> to <a href="#acr">Customers-&gt;Referrers</a>.</li>
    <li>The following files were changed:<ol>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
    </ol></li>
  </ul></li>
  <li>v2.7.2, 2014-10-08:<ul>
    <li>BUGFIX: The /images/referrers directory was missing from the plugin's distribution; I've included an &quot;empty&quot; index.html file to ensure that the structure is included!</li>
    <li>BUGFIX: The referrers_main page didn't account for manually-updated commission payments.  Thanks to <em>mvstudio</em> for the report and the suggested code to correct!  Please note that sideboxes are now disabled when the referrers_main page is displayed.  If you want your sideboxes to remain, edit /includes/modules/pages/referrers_main/header_php.php and remove (or comment-out) the last line in that file.</li>
    <li>The following files were changed:<ol>
      <li>/images/referrers/index.html</li>
      <li>/includes/languages/english/YOUR_TEMPLATE/referrer_main.php</li>
      <li>/includes/modules/pages/referrer_main/header_php.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/tpl_referrer_main_default.php</li>
    </ol></li>
  </ul></li>
  <li>v2.7.1, 2014-07-13:<ul>
    <li>Include previously-missed change to the account-page template (downwardly-compatible) for Zen Cart v1.5.2 and v1.5.3.</li>
    <li>Add email address to admin-level <em>Customers-&gt;Referrers</em> display.</li>
    <li>The following files were changed:<ol>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_account_default.php</li>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
    </ol></li>
  </ul></li>
  <li>v2.7.0, 2014-05-01:<ul>
    <li>Allow store-owners to more control the commission paid to their affiliates and to selectively pay payable commissions.</li>
    <li>The following files were changed:<ol>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
    </ol></li>
    <li>Database changes:<ol>
      <li>Columns <em>commission_id</em>, <em>commission_payment_amount</em> and <em>commission_manual</em> added to the <b>commissions</b> table.</li>
      <li>The primary key for this table was changed from <em>commission_orders_id</em> to <em>commission_id</em>.</li>
      <li>The <em>commission_manual</em> value is set to 1 if the calculated value of the <em>commission_payment_amount</em> was manually changed during the commission-payment process.</li>
    </ol></li>
  </ul></li>
  <li>v2.6.1, 2014-03-20:<ul>
    <li>Corrected the code display in the <a href="#sidebox">Information Sidebox</a> section of this readme.</li>
    <li>Changed the default value on initial installation of the <em>Include in Information Sidebox</em> setting from <b>true</b> to <b>false</b>.</li>
    <li>Include updates to the <em>Orders Status History &mdash; Updated By</em> plugin (v1.1.0).</li>
    <li>The following files were changed:<ol>
      <li><span class="osh">/includes/functions/extra_functions/osh_updated_by_functions.php</span></li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li><span class="osh">/YOUR_ADMIN/includes/languages/extra_definitions/osh_updated_by.php</span></li>
    </ol></li>
    <li>Database changes:<ol>
      <li>Default value for <em>Include in Information Sidebox?</em> changed from true to false.</li>
    </ol></li>
  </ul></li>
  <li>v2.6.0, 2013-11-30:<ul>
    <li>Updated to v1.1.0 of the "Common Orders Status History" framework, to pull in downwardly-compatible changes for Zen Cart v1.5.2.</li>
    <li>Update information sidebox to use SSL on the <em>contact_us</em> page (as changed in Zen Cart v1.5.2.).</li>
    <li>The following files were changed:<ol>
      <li><span class="osh">/includes/functions/extra_functions/osh_updated_by_functions.php</span></li>
      <li><span class="template">/includes/modules/sideboxes/YOUR_TEMPLATE/information.php</span></li>
      <li><span class="corefile">/YOUR_ADMIN/orders.php</span></li>
    </ol></li>
  </ul></li>
  <li>v2.5.1, 2013-09-08:<ul>
    <li>BUGFIX: Introduced in v2.5.0, no order details were displayed on <em>referrers_main</em> if the configuration contained <b>no</b> orders-status exclusions.</li>
    <li>Updated language file for <em>referrers_main</em> page to make it more obvious that the activity report is based on commission payments.</li>
    <li>BUGFIX: Banner images displayed using HTTP_SERVER on SSL pages, resulting in mixed-content warnings from the browser.</li>
    <li>The following files were changed:<ol>
      <li>/includes/modules/pages/referrer_main/header_php.php</li>
      <li>/includes/languages/english/YOUR_TEMPLATE/referrer_main.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_referrer_tools_default.php</li>
    </ol></li>
  </ul></li>
  <li>v2.5.0, 2013-08-03:<ul>
    <li><strong>Note:</strong> Admin configuration version updated to v2.5.0.</li>
    <li>BUGFIX: Not updating date_modified field when performing a database update on the module's version number.</li>
    <li>BUGFIX: <em>referrers_main</em> page content did not account for excluded order status'.</li>
    <li>Added <a href="#combine">Combine Exclusions on Referrers Page?</a> configuration variable and associated processing.</li>
    <li>Added an <em>updated_by</em> column to the <em>orders_status_history</em> table; use common functions when performing an orders_status_history table update.</li>
    <li>When a commission is paid to one of your store's affiliate-marketers, an <em>orders_status_history</em> record is created for the associated order(s) to note that event (along with the admin name/id of the person who clicked the "Pay" button).</li>
    <li>BUGFIX: Commission-paid dates on the <em>referrers_main</em> page were formatted incorrectly.</li>
    <li>BUGFIX: Activity date-range on the <em>referrers_main</em> page should find commission-payments in the range, not referred-customer purchases.</li>
    <li>The following files were changed:<ol>
      <li><span class="added">/includes/functions/extra_functions/osh_updated_by_functions.php</span></li>
      <li>/includes/modules/pages/referrer_main/header_php.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_referrer_main_default.php</li>
      <li><span class="corefile">/YOUR_ADMIN/orders.php</span></li>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li><span class="added">/includes/functions/extra_functions/osh_updated_by_admin_functions.php</span></li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/referrers_functions.php</li>
      <li><span class="corefile">/YOUR_ADMIN/includes/languages/english/orders.php</span> <span class="added">(added)</span></li>
      <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
      <li><span class="added">/YOUR_ADMIN/includes/languages/english/extra_definitions/osh_updated_by.php</span></li>
    </ol></li>
    <li>Database changes:<ol>
      <li>Added <em>Combine Exclusions on Referrers Page?</em> configuration setting.</li>
      <li>Column <em>updated_by</em> added to the <em>orders_status_history</em> table.</li>
    </ol></li>
  </ul></li>
  <li>v2.4.1, 2013-07-19:<ul>
    <li>BUGFIX: Referrer website link was relative instead of absolute on admin's <em>Customers-&gt;Referrers</em>.</li>
    <li>BUGFIX: Link on <em>Customers-&gt;Orders</em> takes you to the customer, not the referrer.</li>
    <li>The following files were changed:<ol>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/referrers_functions.php</li>
      <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
    </ol></li>
  </ul></li>
  <li>v2.4.0, 2013-06-14:<ul>
    <li><strong>Note:</strong> Admin configuration version is unchanged from v2.3.0!</li>
    <li>BUGFIX: Didn't include the updated version of /includes/classes/observers/class.snap_order_observer.php in the v2.3.0 distribution!</li>
    <li>BUGFIX: Corrected files changed for this version to properly reflect the template file that was changed.</li>
    <li>BUGFIX: Completed partially-completed referrer_edit page processing.</li>
    <li>The following files were changed:<ol>
      <li>/includes/classes/observers/class.snap_order_observer.php</li>
      <li><span class="added">/includes/languages/english/YOUR_TEMPLATE/referrer_edit.php</span></li>
      <li><span class="added">/includes/modules/pages/referrer_edit/header_php.php</span></li>
      <li><span class="added">/includes/templates/YOUR_TEMPLATE/tpl_referrer_edit_default.php</span></li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_referrer_main_default.php</li>
    </ol></li>
  </ul></li>
  <li>v2.3.0, 2013-06-12:<ul>
    <li><strong>Notes:</strong><ol>
      <li>Starting with this version, there is one <span class="corefile">core-file overwrite</span>.</li> 
    </ol></li>
    <li>Added an <em>Order ID</em> column to the detailed view in the admin's <em>Customers-&gt;Referrers</em> page, to allow the store administrator to have an easy way to see the order for which the commission was paid.</li>
    <li>Added an indicator to the admin's <em>Customers-&gt;Orders</em> page, to allow the store administrator to quickly see that the order was based on a commission.  A link-back to the referrer's details is also included</li>
    <li>BUGFIX: When using the affiliate banners, the image-link produced was relative instead of absolute so it didn't reference the actual store.</li>
    <li>The following files were changed:<ol>
      <li>/includes/classes/observers/class.snap_order_observer.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_referrer_tools_default.php</li>
      <li><span class="corefile">/YOUR_ADMIN/orders.php</span><span class="added"> (added)</span></li>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li><span class="added">/YOUR_ADMIN/images/icons/cash.jpg</span></li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li><span class="added">/YOUR_ADMIN/includes/functions/extra_functions/referrers_functions.php</span></li>
      <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
      <li><span class="added">/YOUR_ADMIN/includes/languages/english/extra_definitions/referrers_info.php</span></li>
      <li>/YOUR_ADMIN/includes/languages/english/extra_definitions/referrers_name.php</li>
    </ol></li>
    <li>Database changes:<ol>
      <li>Added <a href="#purchases">Purchases Per Cookie</a> configuration setting.</li>
    </ol></li>
  </ul></li>
  <li>v2.2.0, 2013-06-02:<ul>
    <li>Added <a href="#lifetime">Cookie Lifetime</a> configuration setting.</li>
    <li>Beefed up the <a href="#install">Installation</a> section of the readme to identify specifically the plethora of YOUR_TEMPLATE directories that need to be renamed.</li>
    <li>The following files were changed:<ol>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
    </ol></li>
    <li>Database changes:<ol>
      <li>Added <em>Cookie Lifetime</em> configuration setting.</li>
    </ol></li>
  </ul></li>
  <li>v2.1.2a, 2013-04-09:<ul>
    <li>BUGFIX: Configuration version was not being written on new installs, resulting in a new configuration_group_id being created each time you ran your admin.</li>
    <li>Moved the affiliate cookie lifetime value into a defined value, in preparation for that value to become an admin customization.</li>
    <li>The following files were changed:<ol>
      <li>/includes/init_includes/init_snap.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
    </ol></li>
  </ul></li>
  <li>v2.1.1, 2013-04-01:<ul>
    <li>Modifications to referrer_tools page to provide more support for sites that use rewritten URLs.</li>
    <li>The following files were changed:<ol>
      <li>/includes/modules/pages/referrer_tools/jscript_tools.php</li>
      <li>/includes/templates/YOUR_TEMPLATE/templates/tpl_referrer_tools_default.php</li>
    </ol></li>
  </ul></li>
  <li>v2.1.0a, 2013-03-12, Added <a href="#ufapv">Upgrading from a Previous Version</a>.</li>
  <li>v2.1.0, 2013-03-11:<ul>
    <li>BUGFIX: Don't display "Details" button if there are no affiliates (yet).</li>
    <li>BUGFIX: Payment email to affiliate always shows $0.00.</li>
    <li>BUGFIX: Approval and payment emails show FILENAME_REFERRER_MAIN for <em>referrer_main</em> page link.</li>
    <li>BUGFIX: Payment email shows <em>referrer_main</em> as link for "Contact Us".</li>
    <li>BUGFIX: Pagination on Customers-&gt;Referrers was broken.  Also, moved maximum number of affiliates to display to a configuration setting.</li>
    <li>Added a configuration switch to control whether or not a customer receives a commission on purchases made with their affiliate key in their account.</li>
    <li>Added a configuration setting to identify any <em>Orders Status</em> codes that should <strong>not</strong> receive a commission.</li>
    <li>BUGFIX: Disable the "Pay" button if the affiliate's current commission value is 0.</li>
    <li>"Prettied-up" the account-activation and commission-payment HTML email text.</li>
    <li>Added validation for the commission-rate entry in Customers-&gt;Referrers.</li>
    <li>BUGFIX: Missed a couple of admin-side language values (details buttons values).</li>
    <li>If the affiliate's account is not approved, the "Ban", "Pay" and "Update" buttons are disabled.</li>
    <li>The following files were changed:<ol>
      <li>/includes/classes/observers/class.snap_order_observer.php</li>
      <li>/includes/modules/pages/referral_main/header_php.php</li>
      <li>/YOUR_ADMIN/referrers.php</li>
      <li>/YOUR_ADMIN/includes/extra_datafiles/referrers_filenames.php</li>
      <li>/YOUR_ADMIN/includes/functions/extra_functions/init_referrers.php</li>
      <li>/YOUR_ADMIN/includes/languages/english/referrers.php</li>
    </ol></li>
    <li>Datebase changes:<ol>
      <li>Added <em>Affiliate Display Count</em>, <em>Allow Self-Commissions</em> and <em>Orders Status Exclusions</em> settings.</li>
    </ol></li>
  </ul></li>
  <li>v2.0.0, 2013-03-05, Initial release.<ul>
    <li><strong>No</strong> core-file overwrites &hellip; <strong>until v2.3.0!</strong></li>
    <li>Moved <em>all</em> language-specific text to the language file, both catalog and admin.</li>
    <li>Moved $_SESSION['referrer'] initialization to /includes/init_includes/init_snap.php and /includes/auto_loaders/config.snap.php; /includes/application_top.php is no longer changed by this plugin.</li>
    <li>Moved changes to /includes/database_tables.php and /includes/filenames.php to /includes/extra_datafiles/snap_file_database_names.php; those core files are no longer changed by this plugin.</li>
    <li>Moved hard-coded referral terms to a separate language define file (/includes/languages/english/html_includes/define_referrer_terms.php and /includes/languages/english/html_includes/YOUR_TEMPLATE/define_referrer_terms.php).</li>
    <li>Moved /snapconfigure.php file initializations to your admin's Configuration-&gt;Affiliate Program.</li>
    <li>Database initialization is now performed <em>automatically</em> via your Zen Cart admin.</li>
    <li>Added "Information" sidebox link, controlled via admin configuration switch.</li>
    <li>Affiliate banner images are now specified via your admin.</li>
    <li>Commissions are given only to affiliate accounts that are previously authorized and not banned.  An affiliate customer can no longer get a discount by using their own affiliate code.</li>
    <li>Using Zen Cart default email template for all emails sent; no longer require additional templates.</li>
  </ul></li>
</ul>

<h2 id="ufapv">Upgrading from a Previous Version</h2>
<p>Following are my suggestions if you are upgrading to this version from a previous version of this plugin:</p>
<ul>
  <li>From any version prior to v2.0.0, you're most likely running a clean install of this plugin because the previous version didn't work on Zen Cart versions 1.5.0 and later and this plugin doesn't support Zen Cart versions prior to v1.5.0!  If you <b>are</b> upgrading from a &quot;SNAP Affiliates&quot; version prior to v2.0.0, you'll need to uninstall that plugin prior to installing this updated version!</li>
  <li>Upgrading from v2.0.0, you can simply copy the plugin's file structure (after directory renames) into your store's.  The database initialization code has been updated to recognize the version installed and adapt the configuration based on the previously installed version &hellip; so you won't lose any of your existing database settings.</li>
</ul>

<h2>Un-install</h2>
<p>Delete the new storefront and admin files that were previously copied and <em>then</em> run the <code>/docs/snap_affiliates/uninstall/uninstall_snap.sql</code> file that comes with this plugin.</p>

</body>
</html>